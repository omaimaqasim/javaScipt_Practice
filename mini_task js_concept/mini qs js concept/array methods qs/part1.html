<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>part 1 array method</title>
</head>
<body>
    <script>
          // ✅ Q17: what is the avg income of all the people in an array

    let people = [
      { name: "Ali", surname: "Khan", dob: "1995-03-12", department: "IT", salary: 75000 },
      { name: "Sara", surname: "Ahmed", dob: "1992-07-25", department: "HR", salary: 65000 },
      { name: "Usman", surname: "Malik", dob: "1998-01-10", department: "Finance", salary: 80000 },
      { name: "Ayesha", surname: "Raza", dob: "1990-11-02", department: "Marketing", salary: 70000 },
      { name: "Bilal", surname: "Shaikh", dob: "1997-06-15", department: "IT", salary: 72000 },
      { name: "Fatima", surname: "Hussain", dob: "1993-09-21", department: "Finance", salary: 85000 },
      { name: "Zain", surname: "Ali", dob: "1996-12-05", department: "HR", salary: 60000 }
    ];

    console.group("Q17: Average of income");

    let totalIncome = 0;
    let AverageOfIncome = (arr) => {
      for (let i = 0; i < arr.length; i++) {
        totalIncome += arr[i].salary;
      }
      return "Average Salary:" + Math.round(totalIncome / arr.length)

    }
    console.log(AverageOfIncome(people))
     

    console.log("second method")
   let avg =  people.reduce((total,person)=>{
        
   return  total += person.salary
       
    },0)/people.length
    console.log(avg)

    console.groupEnd()

    // ✅ Q18: People older than 30
    console.group("Q18: People older than 30");

    let isOlderThan30 = (arr) => {
      let now = new Date();
      let current = [now.getDate(), now.getMonth() + 1, now.getFullYear()];
      let result = [];

      for (let i = 0; i < arr.length; i++) {
        const individual = arr[i];
        let [birthYear, birthMonth, birthDay] = individual.dob.split("-").map(Number);

        let age = current[2] - birthYear; // current year - birth year

        // adjust if birthday hasn't happened yet this year
        if (current[1] < birthMonth || (current[1] === birthMonth && current[0] < birthDay)) {
          age--;
        }

        if (age > 30) {
          result.push(individual.name + " (" + age + " years old)");
        }
      }

      return result;
    };

    console.log(isOlderThan30(people));
    console.groupEnd();

    // qno 19 : get the list of people's full name 
    console.group(" qno 19 : get the list of people's full name ")
    for (let i = 0; i < people.length; i++) {
      const individual = people[i];

      console.log(" Full Name : " + individual.name + " " + individual.surname)

    }
    console.groupEnd()

    // ✅ Q20: Get the list of people in array ordered from youngest to oldest
    console.group("Q20: People sorted youngest → oldest");

    function sortPeopleByAge(arr) {
      return arr.sort((a, b) => {
        if (a.dob > b.dob) {
          return -1;
        } else if (a.dob < b.dob) {
          return 1;
        }
        return 0;
      });
    }

    let sorted = sortPeopleByAge(people);

    sorted.forEach(person => {
      console.log(person.name + " " + person.surname + " → " + person.dob);
    });

    console.groupEnd();


    // ✅ Q21: Count how many people are in each department
    console.group("Q21: People count in each department");

    let departments = {};

    for (let i = 0; i < people.length; i++) {
      const depart = people[i].department;
      // departments[depart] → checks if this department key already has a value
      // if it is undefined (not created yet) → false → else block runs
      // if it already has a number (like 2) → true → if block runs
      if (depart in departments) {
        departments[depart]++;
      } else {
        departments[depart] = 1;
      }
    }

    console.log("Department Counts:", departments);

    console.groupEnd();

    </script>
</body>
</html>