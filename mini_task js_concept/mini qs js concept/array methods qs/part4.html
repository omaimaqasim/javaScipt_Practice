<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>part 4 </title>
</head>

<body>
  <script>
    let users = [
      {
        id: "e0a0afb1-8ac6-48d4-99ee-12af8ddcbdae",
        email: "tcasaletto08@soundcloud.com",
        ip_address: "53.215.156.73"
      },
      {
        id: "a7b0221d-5228-4992-a964-b5f3e3d7a022",
        email: "nmoffett10@paginaegialle.it",
        ip_address: "34.81.219.4"
      },
      {
        id: "1019b52c-db9d-45a2-975f-40445592a56a",
        email: "rcrampin20@yale.edu",
        ip_address: "65.181.114.151"
      },
      {
        id: "7b24d915-3a2f-4d56-9378-4e45dbf60f8f",
        email: "lfranklin33@outlook.com",
        ip_address: "192.168.1.47"
      },
      {
        id: "9c3e16b2-71cc-4eb8-b4ef-15b0e2f9c6d1",
        email: "sroberts44@gmail.com",
        ip_address: "172.58.102.89"
      },
      {
        id: "5a89b5ce-2e6b-4e24-92f9-9b13e7a04f0b",
        email: "mjames55@yahoo.com",
        ip_address: "10.12.54.203"
      },
      {
        id: "f3b5a618-29a3-4d5d-9c73-2c80e6c9b4fa",
        email: "hpatel66@protonmail.com",
        ip_address: "83.102.77.165"
      }
    ];

    // exercise no 1 : check whether every email address in the list of user
    // is valid (get a true or false value)

    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

    let email_validation = users.every(user => {
      // .test return true or false 
      return emailPattern.test(user.email)
    })

    console.log(email_validation)

    //  exercise no 2 : find out how many users have an IP address 
    // in a class A network  hint : â€œGo through all users and count how many have an IP address whose first part is between 1 and 126.â€
    let classA = []
    users.forEach(user => {
      let first_number = Number(user.ip_address.split(".")[0])
      for (let i = 1; i < 127; i++) {
        if (first_number === i) {
          classA.push(first_number)
        }
      }
    })
    //  now telling how many ip address are in classA
    if (classA.length !== 0) {
      console.log("there are total " + classA.length + " IP-address that are in classA")
    }
    else {
      console.log("no ip-address in classA")
    }


    //  smarter way to solve this qn 
    const classACount = users.filter(u => +u.ip_address.split('.')[0] <= 126 && +u.ip_address.split('.')[0] >= 1).length;
    console.log(`There are ${classACount} Class A IP addresses.`);

    // exercise no 3 : find the position in the array of the first 
    // user object that has a class B ip address + = Number()

    // this will find user 
    const firstB_user = users.find(user => +user.ip_address.split(".")[0] >= 128 && +user.ip_address.split(".")[0] <= 191)
    console.log(firstB_user)

    //  this will find its position mean index
    const firstB_index = users.findIndex(user => {
      const firstOctet = Number(user.ip_address.split(".")[0]);
      return firstOctet >= 128 && firstOctet <= 191;
    });

    console.log(firstB_index);

    // exercise no : 04 find the user object that has the soundcloud 
    // email address 

     let extract_email = users.find(u=>u.email.split("@")[u.email.split("@").length-1] ==="soundcloud.com")
       console.log(extract_email)

      // exercise no 05 : replace all the items in an array with a string value of deleted
        users.forEach((user,index)=>{
            users[index] = "deleted"
       })
       console.log(users)
      //  replace and replace all is only used for string 
</script>


</body>

</html>