<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>array method part 2</title>
</head>

<body>
  <script>
    const orders = [
      {
        orderId: '123',
        customerId: '123',
        deliveryDate: '01-01-2020',
        delivered: true,
        items: [
          { productId: '123', price: 55 },
          { productId: '234', price: 30 }
        ]
      },
      {
        orderId: '234',
        customerId: '234',
        deliveryDate: '01-02-2020',
        delivered: false,
        items: [
          { productId: '234', price: 30 }
        ]
      },
      {
        orderId: '345',
        customerId: '234',
        deliveryDate: '05-01-2020',
        delivered: true,
        items: [
          { productId: '567', price: 30 },
          { productId: '678', price: 80 }
        ]
      },
      {
        orderId: '456',
        customerId: '345',
        deliveryDate: '12-01-2020',
        delivered: true,
        items: [
          { productId: '789', price: 12 },
          { productId: '890', price: 90 }
        ]
      },
      {
        orderId: '578',
        customerId: '456',
        deliveryDate: '12-01-2020',
        delivered: true,
        items: [
          { productId: '901', price: 43 },
          { productId: '123', price: 55 }
        ]
      }
    ];

    // qno 1 : get a list of the orders for the customer with the id 234 that have not been delivered

    let order = orders.filter(order => {
      return order.orderId === "234" && order.delivered === false
    })
    console.log(order)


    // qno 2 : create a new property on each order with the total price of items ordered
    
    let total = orders.map(order => {
      let sum = order.items.reduce((acc, item) => acc + item.price, 0)
      order.totalPrice = sum
      return order
    })
    console.log(total)


    // qno 3 : have all the orders been delivered?

    let isDelivered = (arr) => {
      let undelivered = arr.filter(order => !order.delivered)
      let alldelivered = undelivered.length === 0
      return alldelivered
    }
    console.log(isDelivered(orders))

    // every() checks if every element satisfies the condition. âœ… Best for: Checking if all items meet a condition.
    // use some() to check if only one satisfies the condition. They both are loops.


    // qno 4 : has the customer with id 123 made any order

    let checkSpecificOrder = (arr) => arr.some(order => order.customerId === "123")
    console.log(checkSpecificOrder(orders))

    // qno 5 : have any product with an id of 123 been sold
    let sold = orders.some(order=> order.delivered && order.items.some(item=>item.productId==="123"))
     console.log(sold)
  </script>
</body>

</html>
